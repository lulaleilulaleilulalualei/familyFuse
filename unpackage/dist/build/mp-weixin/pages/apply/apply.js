(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/apply/apply"],{"197f":function(t,i,e){"use strict";(function(t){e("c5ea"),e("921b");o(e("66fd"));var i=o(e("e5b3"));function o(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e("543d")["createPage"])},"26a3":function(t,i,e){},"2c70":function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=e("2f62");function n(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{},o=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.forEach(function(i){a(t,i,e[i])})}return t}function a(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}var s=function(){return e.e("components/sharePoster").then(e.bind(null,"8706"))},r=function(){return e.e("components/loadErr").then(e.bind(null,"6530"))},u={data:function(){return{navColor:"rgba(255,255,255,0)",navTitle:0,isShowNavBorder:!1,isShowPorsterBox:!1,isShowOthInit:!1,userInfo:{},isLoadErr:!1,dataObj:{},lineObj:{},swiperArr:[],dear_id:null,curIdx:0,unionArr:[],viewId:"",albumIdx:0,albumImgs:[],videoTop:null,isPlayVideo:!1,isShowRouteList:!1,optRouteTxt:"展开",isShowNameList:!1,optApplyTxt:"展开",isShowFeeBox:!1,isShowSmallFee:!1,isAuth:!1,isShareStatus:!1,isFromStartName:!1}},components:{showPosterBox:s,loadErr:r},onLoad:function(t){var i=this,e=decodeURIComponent(t.scene);this.dear_id="undefined"!=e?e:t.dear_id,t.from&&"startName"==t.from&&(this.isFromStartName=!0),this.isShareStatus=this.$isSharePage,this.$userInfo?(this.isAuth=!0,this.userInfo=this.$userInfo):this.$api.userLogin(function(t){1==t&&(i.isAuth=!0,i.userInfo=i.$userInfo)},this.dear_id),this.getAlbumArr()},onShow:function(){var t=this;setTimeout(function(){t.getData()},10)},onHide:function(){this.isShowFeeBox=!1},methods:n({},(0,o.mapActions)(["toGetActInfo","toSaveSpotInfo"]),{getAlbumArr:function(){var t=this;this.$api.ajax({url:this.$config.getImgs}).then(function(i){if(200==i.statusCode&&0==i.data.code){var e=i.data.data;t.albumImgs=e}else t.$api.warnNotice(i.data.message)}).catch(function(){t.$api.warnNotice("相册加载失败")})},swiperAlbumChange:function(t){this.albumIdx=t.detail.current},toPreviewAlbum:function(i){var e=this;t.previewImage({current:e.albumImgs[i],urls:e.albumImgs})},toPriviewCert:function(i){var e=this;t.previewImage({current:e.dataObj.img_list[i],urls:e.dataObj.img_list})},toEditJoinInit:function(){var i=this;this.dataObj.uid==this.userInfo.uid&&t.navigateTo({url:"/pages/initName/initName?from=edit&id=".concat(i.dear_id)})},toJumpDayRoute:function(t){var i=this;this.isShowRouteList?this.viewId="route_".concat(t):(this.isShowRouteList=!0,setTimeout(function(){i.viewId="route_".concat(t)},200))},curSwiperChange:function(t){this.curIdx=t.detail.current},toShowSmallFee:function(){this.isShowSmallFee=!this.isShowSmallFee},toCloseSmallFee:function(){this.isShowSmallFee=!this.isShowSmallFee},toShowMoreInit:function(){0!=this.unionArr.length?this.isShowOthInit=!0:this.$api.warnNotice("您尚未添加联合发起人")},toCloseInitBox:function(t){var i=t.target.dataset.sign;i&&(this.isShowOthInit=!1)},toBackHome:function(){t.reLaunch({url:"/pages/index/index"})},getUserInfo:function(i){if("getUserInfo:ok"==i.detail.errMsg){t.showLoading({title:"授权登陆中...",mask:!0});var e=this;this.$api.userLogin(function(i){"1"==i&&(t.hideLoading(),t.showToast({title:"授权登录成功",icon:"success",mask:!0,success:function(){e.isAuth=!0,e.userInfo=e.$userInfo}}))},this.dear_id)}else this.$api.warnNotice("您已拒绝授权！"),this.isAuth=!1},toRelaodData:function(){this.isLoadErr=!1,this.dataObj={},this.getData()},getData:function(){var i=this;t.showLoading({title:"数据加载中",mask:!0}),this.$api.ajax({url:this.$config.applyActDetail,data:{no:this.$config.no,dear_id:this.dear_id}}).then(function(e){if(200==e.statusCode&&0==e.data.code){var o=e.data.data;o.tel=o.tel.substr(0,3)+"********",i.dataObj=o,i.lineObj=JSON.parse(o.content),i.unionArr=JSON.parse(o.union_json)||[],0!=i.unionArr.length&&i.unionArr.map(function(t,i){var e=t.union_name.split(" | ")[1];"会长"!=e&&"执行会长"!=e||(t.union_tel=t.union_tel.substr(0,3)+"********")}),i.lineObj.day_title_list.map(function(t){t.DTitles=t.title.split(",")}),i.lineObj.day_content_list.map(function(t){t.content.map(function(t){t=t.replace(/\<img/gi,'<img style="max-width:100%;height:auto"')})});var n=[],a=1;i.lineObj.point_list.map(function(t,i){1==a?(n.push({}),n[n.length-1].firstPort=t,n[n.length-1].morePort=[],a++):2==a?(n[n.length-1].morePort.push(t),a++):3==a&&(n[n.length-1].morePort.push(t),a=1)}),i.swiperArr=n,setTimeout(function(){i.videoTop||i.queryMultipleNodes("#video",function(t){i.videoTop=t}),t.hideLoading()},500)}else t.hideLoading(),i.$api.warnNotice(e.data.message),i.isLoadErr=!0}).catch(function(e){t.hideLoading(),i.isLoadErr=!0})},toShowSharePoster:function(){this.isShowPorsterBox=!0},toClosePosterBox:function(t){this.isShowPorsterBox=!1},toApplyActivity:function(){this.isShowFeeBox=!0},toCloseFeeBox:function(t){var i=t.target.dataset.sign;i&&(this.isShowFeeBox=!1)},toScroll:function(t){var i=t.detail.scrollTop;this.navColor="rgba(255,2555,255,".concat(i/400>1?1:i/400,")"),this.navTitle=i/400>1?1:i/400,this.isShowNavBorder=i>=400,this.videoTop&&this.videoPlayCon(i)},videoPlayCon:function(i){var e=t.getSystemInfoSync(),o=this.videoTop-(e.windowHeight-e.windowWidth/750*487);i-o>0&&(this.isPlayVideo=!0)},queryMultipleNodes:function(i,e){var o=t.createSelectorQuery().in(this);o.select(i).boundingClientRect(function(t){"function"==typeof e&&e(t.top)}).exec()},toJumpSpotIntro:function(i){this.toSaveSpotInfo(i),t.navigateTo({url:"/pages/spotShow/spotShow"})},toShowOptRoute:function(){this.isShowRouteList?(this.isShowRouteList=!1,this.optRouteTxt="展开"):(this.isShowRouteList=!0,this.optRouteTxt="收起")},toOptApplyList:function(){this.isShowNameList?(this.isShowNameList=!1,this.optApplyTxt="展开"):(this.isShowNameList=!0,this.optApplyTxt="收起")},toStartCF:function(){var i=this;this.toGetActInfo(this.dataObj),t.navigateTo({url:"/pages/writeOrder/writeOrder?type=2&dear_id=".concat(i.dear_id)})},toJumpApply:function(){var i=this;this.toGetActInfo(this.dataObj),t.navigateTo({url:"/pages/writeOrder/writeOrder?type=1&dear_id=".concat(i.dear_id)})},onShareAppMessage:function(){var t=this;return{path:"/pages/apply/apply?dear_id=".concat(t.dear_id),title:t.dataObj.title,imageUrl:t.dataObj.banner}}})};i.default=u}).call(this,e("543d")["default"])},"4ffc":function(t,i,e){"use strict";var o=function(){var t=this,i=t.$createElement;t._self._c},n=[];e.d(i,"a",function(){return o}),e.d(i,"b",function(){return n})},aa07:function(t,i,e){"use strict";e.r(i);var o=e("2c70"),n=e.n(o);for(var a in o)"default"!==a&&function(t){e.d(i,t,function(){return o[t]})}(a);i["default"]=n.a},e5b3:function(t,i,e){"use strict";e.r(i);var o=e("4ffc"),n=e("aa07");for(var a in n)"default"!==a&&function(t){e.d(i,t,function(){return n[t]})}(a);e("f50e");var s=e("2877"),r=Object(s["a"])(n["default"],o["a"],o["b"],!1,null,"488014a2",null);i["default"]=r.exports},f50e:function(t,i,e){"use strict";var o=e("26a3"),n=e.n(o);n.a}},[["197f","common/runtime","common/vendor"]]]);
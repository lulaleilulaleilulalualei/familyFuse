(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"47e3":function(t,i,e){"use strict";e.r(i);var n=e("b5b7"),o=e("b7b1");for(var a in o)"default"!==a&&function(t){e.d(i,t,function(){return o[t]})}(a);e("8d3c");var s=e("2877"),r=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,"78a9fd36",null);i["default"]=r.exports},"825c":function(t,i,e){},"8d3c":function(t,i,e){"use strict";var n=e("825c"),o=e.n(n);o.a},b5b7:function(t,i,e){"use strict";var n=function(){var t=this,i=t.$createElement,e=(t._self._c,t.__map(t.dataList,function(i,e){var n=t.hexToRgb(i.background);return{$orig:t.__get_orig(i),m0:n}}));t.$mp.data=Object.assign({},{$root:{l0:e}})},o=[];e.d(i,"a",function(){return n}),e.d(i,"b",function(){return o})},b7b1:function(t,i,e){"use strict";e.r(i);var n=e("bb43"),o=e.n(n);for(var a in n)"default"!==a&&function(t){e.d(i,t,function(){return n[t]})}(a);i["default"]=o.a},bb43:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=a(e("66fd")),o=e("2f62");function a(t){return t&&t.__esModule?t:{default:t}}function s(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{},n=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.forEach(function(i){r(t,i,e[i])})}return t}function r(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}var u=function(){return e.e("components/loadErr").then(e.bind(null,"6530"))},c=function(){return e.e("components/noMore").then(e.bind(null,"71b5"))},d={data:function(){return{startY:0,isScroll:!1,scrollTop:0,scrollVal:0,sysInfo:null,slideVal:0,keywords:"",dataList:[],isMore:!0,isLoadErr:!1,userInfo:null,isAuth:!1}},components:{loadErr:u,noMore:c},computed:s({},(0,o.mapGetters)(["_isToOrderList"]),{listH:function(){var i=t.getSystemInfoSync();return i.windowHeight-i.windowWidth/750*100-this.CustomBar+"px"},headTop:function(){var i=t.getSystemInfoSync();return i.windowWidth/750*10+this.CustomBar+"px"},searchTop:function(){return this.CustomBar+"px"}}),onLoad:function(){var i=this;this.sysInfo=t.getSystemInfoSync(),this.$userInfo?(this.isAuth=!0,this.userInfo=this.$userInfo):this.$api.userLogin(function(t){1==t&&(i.isAuth=!0,i.userInfo=i.$userInfo)}),this.$isSharePage&&(n.default.prototype.$isSharePage=!1),this.miniAppUpdate()},onShow:function(){var i=this;this.dataList=[],this.scrollVal=0,this.keywords="",this._isToOrderList?(this.toJumpOrderList(!1),t.navigateTo({url:"/pages/orderList/orderList"})):setTimeout(function(){i.getListData()},10)},onHide:function(){this.keywords=""},methods:s({},(0,o.mapActions)(["toJumpOrderList"]),{toLookAlbum:function(){t.navigateTo({url:"/pages/openAlbum/openAlbum"})},toJumpInitName:function(){t.navigateTo({url:"/pages/joinStart/joinStart"})},toJumpDetail:function(i){var e=this;t.navigateTo({url:"/pages/apply/apply?dear_id=".concat(e.dataList[i].dear_id)})},toSearchKeyword:function(t){this.keywords=this.$api.trim(t.detail.value),this.dataList=[],this.getListData()},toRelaodData:function(){this.isLoadErr=!1,this.dataList=[],this.keywords="",this.getListData()},getListData:function(){var i=this;t.showLoading({title:"数据加载中",mask:!0}),this.$api.ajax({url:this.$config.clanList,data:{keywords:this.keywords}}).then(function(e){if(200==e.statusCode&&0==e.data.code){var n=e.data.data;n.map(function(t){t.background||(t.background="#FFDD71")}),i.dataList=n,setTimeout(function(){t.hideLoading()},200)}else t.hideLoading(),i.isLoadErr=!0,i.$api.warnNotice(e.data.message)}).catch(function(){t.hideLoading(),i.isLoadErr=!0,i.$api.warnNotice("列表加载失败")})},toJumpOrderDetail:function(){t.navigateTo({url:"/pages/orderList/orderList"})},getUserInfo:function(i){if("getUserInfo:ok"==i.detail.errMsg){t.showLoading({title:"授权登陆中...",mask:!0});var e=this;this.$api.userLogin(function(i){"1"==i&&(t.hideLoading(),t.showToast({title:"授权登录成功",icon:"success",mask:!0,success:function(){e.isAuth=!0,e.userInfo=e.$userInfo}}))})}else this.$api.warnNotice("您已拒绝授权！"),this.isAuth=!1},toScroll:function(t){this.scrollVal=t.detail.scrollTop},touchstart:function(t){this.startY=t.touches[0].pageY},touchmove:function(t){if(this.isScroll){if(0!=this.scrollVal)return;t.touches[0].pageY-this.startY>50&&(this.slideVal=0,this.isScroll=!1,""!=this.keywords&&(this.keywords="",this.dataList=[],this.index=1,this.getListData()))}else this.startY-t.touches[0].pageY>50&&(this.slideVal=-this.sysInfo.windowWidth/750*400,this.isScroll=!0)},toScrollTop:function(){this.slideVal=0,this.isScroll=!1,this.scrollTop=0,""!=this.keywords&&(this.keywords="",this.dataList=[],this.index=1,this.getListData())},hexToRgb:function(t){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t.split("#")[1]);return i?"rgba(".concat(parseInt(i[1],16),",").concat(parseInt(i[2],16),",").concat(parseInt(i[3],16),",0.2)"):null},miniAppUpdate:function(){var i=this,e=t.getUpdateManager();e.onUpdateReady(function(){t.showModal({title:"更新提示",content:"监测到小程序版本有更新，是否重启应用？",confirmColor:"#FFDA4C",success:function(t){t.confirm&&e.applyUpdate()}})}),e.onUpdateFailed(function(){i.$api.warnNotice("新版本更新失败")})}}),onShareAppMessage:function(){var t=this;return{title:t.$config.defaultName,imageUrl:t.$config.defaultUrl}}};i.default=d}).call(this,e("543d")["default"])},c9f2:function(t,i,e){"use strict";(function(t){e("c5ea"),e("921b");n(e("66fd"));var i=n(e("47e3"));function n(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e("543d")["createPage"])}},[["c9f2","common/runtime","common/vendor"]]]);
(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/cfDetail/cfDetail"],{"02b9":function(t,a,e){"use strict";var i=e("4fac"),n=e.n(i);n.a},"4fac":function(t,a,e){},"54b1":function(t,a,e){"use strict";e.r(a);var i=e("fd72"),n=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(a,t,function(){return i[t]})}(o);a["default"]=n.a},af3e:function(t,a,e){"use strict";(function(t){e("c5ea"),e("921b");i(e("66fd"));var a=i(e("b868"));function i(t){return t&&t.__esModule?t:{default:t}}t(a.default)}).call(this,e("543d")["createPage"])},b868:function(t,a,e){"use strict";e.r(a);var i=e("f23d"),n=e("54b1");for(var o in n)"default"!==o&&function(t){e.d(a,t,function(){return n[t]})}(o);e("02b9");var d=e("2877"),s=Object(d["a"])(n["default"],i["a"],i["b"],!1,null,"11a2e3bb",null);a["default"]=s.exports},f23d:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=(t._self._c,t.actLineLeft()),i=t.actLineW();t.$mp.data=Object.assign({},{$root:{m0:e,m1:i}})},n=[];e.d(a,"a",function(){return i}),e.d(a,"b",function(){return n})},fd72:function(t,a,e){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=function(){return e.e("components/loadErr").then(e.bind(null,"6530"))},n={data:function(){return{isLoadErr:!1,dataObj:{},id:null}},components:{loadErr:i},onLoad:function(t){this.id=t.id,this.getDetailData()},methods:{actLineW:function(){var a=t.getSystemInfoSync(),e=a.windowWidth/750*670;return parseFloat(this.dataObj.have_fee)/parseFloat(this.dataObj.target_fee)*e+"px"},actLineLeft:function(){var a=t.getSystemInfoSync(),e=a.windowWidth/750*670,i=parseFloat(this.dataObj.have_fee)/parseFloat(this.dataObj.target_fee)*e,n=a.windowWidth/750*80;return i+n>=e&&(i=e-n),i+"px"},hadScale:function(){var t=parseFloat(this.dataObj.have_fee)/parseFloat(this.dataObj.target_fee)*100;return t.toFixed(2)},toRelaodData:function(){this.isLoadErr=!1,this.dataObj={},this.getDetailData()},getDetailData:function(){var a=this;t.showLoading({title:"数据加载中",mask:!0}),this.$api.ajax({url:this.$config.cfOrderDetail,data:{crowd_id:this.id}}).then(function(e){200==e.statusCode&&0==e.data.code?(a.dataObj=e.data.data,setTimeout(function(){t.hideLoading()},500)):(t.hideLoading(),a.$api.warnNotice(e.data.message),a.isLoadErr=!0)}).catch(function(){t.hideLoading(),a.isLoadErr=!0})},toSelfPay:function(){var a=this;if(1!=this.dataObj.status)if(this.dataObj.days<=0||2==this.dataObj.status)this.$api.warnNotice("助力结束~");else{t.showLoading({title:"调用支付中...",mask:!0});var e=this;this.$api.ajax({url:this.$config.cfSupportPay,method:"POST",data:{crowd_id:this.id,crowd_fee:parseFloat(this.dataObj.target_fee)-parseFloat(this.dataObj.have_fee)}}).then(function(i){200==i.statusCode&&0==i.data.code?(t.hideLoading(),t.requestPayment({timeStamp:i.data.data.timeStamp||i.data.data.timestamp,nonceStr:i.data.data.nonceStr,package:i.data.data.package,signType:i.data.data.signType,paySign:i.data.data.paySign,success:function(a){"requestPayment:ok"==a.errMsg&&t.showToast({title:"支持成功",icon:"success",success:function(){setTimeout(function(){e.isLoadErr=!1,e.dataObj={},e.getDetailData()},1500)}})},fail:function(t){a.$api.warnNotice("支付失败")}})):(t.hideLoading(),a.api.warnNotice(i.data.message))}).catch(function(){t.hideLoading(),a.api.warnNotice("操作失败")})}else this.$api.warnNotice("您已助力成功~")}},onShareAppMessage:function(){var t=this;return{path:"/pages/crowdfunding/crowdfunding?crowd_id=".concat(t.id),title:"快来帮我助力姓氏文化之旅",imageUrl:t.$config.defaultUrl}}};a.default=n}).call(this,e("543d")["default"])}},[["af3e","common/runtime","common/vendor"]]]);
(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/writeOrder/writeOrder"],{"1e78":function(t,e,i){"use strict";i.r(e);var n=i("c2e2"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=o.a},2617:function(t,e,i){"use strict";i.r(e);var n=i("eff9"),o=i("1e78");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i("856b");var r=i("2877"),c=Object(r["a"])(o["default"],n["a"],n["b"],!1,null,"24900e00",null);e["default"]=c.exports},"856b":function(t,e,i){"use strict";var n=i("eaeb"),o=i.n(n);o.a},c2e2:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("2f62");function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){a(t,e,i[e])})}return t}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var r={data:function(){return{isSendCode:!1,codeTxt:"发送验证码",tvlArr:[{name:"name",id_card:"id_card",tel:"tel",ageType:2,addFee:0}],userTel:"",fromType:null,dear_id:null,actInfo:null,actContent:null,isShowActorInfo:!1,equ_room:!1,is_doctor:!1,isAgreeContract:!0,isAgreeAttention:!0,isShowAttention:!1,optIdCardIdx:"",isOverAge:!1,countAgeYouthFee:{fee:0,count:0},subjoinFee:0}},computed:o({},(0,n.mapGetters)(["_actInfo","_isToOrderList"]),{pageMinH:function(){var e=t.getSystemInfoSync();return e.windowHeight+"px"}}),onLoad:function(t){this.fromType=t.type,this.dear_id=t.dear_id,this._actInfo&&(this.actInfo=this._actInfo,this.actContent=JSON.parse(this._actInfo.content),this.actInfo.relFee=this.$api.pointProblem(this.actInfo.pay_fee,this.actInfo.service_fee,"add"),this.toGetActInfo(null))},onShow:function(){this._isToOrderList&&t.reLaunch({url:"/pages/index/index"})},methods:o({},(0,n.mapActions)(["toGetActInfo","toJumpOrderList"]),{idCardFocus:function(t){this.optIdCardIdx=t},idCardGetVal:function(t){var e=this,i=this.$api.trim(t.detail.value);""!=i&&this.$api.ajax({url:this.$config.toCheckIdCard,data:{id_card:i}}).then(function(t){if(200==t.statusCode){if(0==t.data.code){var i=t.data.data;e.tvlArr.map(function(t,n){n==e.optIdCardIdx&&(t.addFee=i.attach_fee,t.ageType=i.type)})}else 10034==t.data.code?e.tvlArr[e.optIdCardIdx].ageType=3:e.$api.warnNotice(t.data.message);e.othFeeCount(),e.optIdCardIdx=""}else e.$api.warnNotice("身份证错误，请重新操作")}).catch(function(t){e.$api.warnNotice("身份证错误，请重新操作")})},othFeeCount:function(){var t=this;this.subjoinFee=0,this.countAgeYouthFee={fee:0,count:0},this.isOverAge=!1,this.tvlArr.map(function(e,i){0==e.ageType?(t.countAgeYouthFee={fee:e.addFee,count:t.countAgeYouthFee.count+1},t.subjoinFee=t.$api.pointProblem(t.countAgeYouthFee.fee,t.subjoinFee,"add")):3==e.ageType&&(t.isOverAge=!0)})},toSelectAgreeContract:function(t){this.isAgreeContract=!this.isAgreeContract},toLookAttention:function(){this.isShowAttention=!this.isShowAttention},toSelectAgreeAttention:function(t){this.isAgreeAttention=!this.isAgreeAttention},toLookOverContract:function(){var e=this;t.showModal({content:"由于打开的文件过大，请确保网速正常的情况下打开",cancelColor:"#909399",confirmColor:"#E80214",success:function(i){i.confirm&&(t.showLoading({title:"文档打开中..."}),t.downloadFile({url:"https://images.jants.cn/hk_apply/ht.pdf",success:function(i){var n=i.tempFilePath;t.openDocument({filePath:n,fileType:"pdf",success:function(e){t.hideLoading(),console.log("打开文档成功")},fail:function(){t.hideLoading(),e.$api.warnNotice("打开失败")}})},fail:function(t){e.$api.warnNotice("文档打开失败，加载超时")}}))}})},toLookOverAccidentPlan:function(){var e=this;t.showModal({content:"由于打开的文件过大，请确保网速正常的情况下打开",cancelColor:"#909399",confirmColor:"#E80214",success:function(i){i.confirm&&(t.showLoading({title:"文档打开中..."}),t.downloadFile({url:"https://images.jants.cn/hk_apply/lc.pptx",success:function(i){var n=i.tempFilePath;t.openDocument({filePath:n,fileType:"pptx",success:function(e){t.hideLoading(),console.log("打开文档成功")},fail:function(i){t.hideLoading(),e.$api.warnNotice("打开失败")}})},fail:function(t){e.$api.warnNotice("文档打开失败，加载超时")}}))}})},bindRoomStatus:function(t){this.equ_room=t.detail.value},bindDoctorStatus:function(t){this.is_doctor=t.detail.value},toCallActPhone:function(){t.makePhoneCall({phoneNumber:"18692125808"})},toJumpMaterial:function(){t.navigateTo({url:"/pages/showMaterial/showMaterial"})},toJumpInsurance:function(){t.navigateTo({url:"/pages/insuranceIntro/insuranceIntro"})},toJumpQltUnit:function(){t.navigateTo({url:"/pages/qualificationUnit/qualificationUnit"})},toShowActorIntro:function(){this.isShowActorInfo=!this.isShowActorInfo},toCloseActorIntro:function(){this.isShowActorInfo=!this.isShowActorInfo},getUserTel:function(t){var e=this;this.$api.ajax({url:this.$config.getPhone,data:{session_key:this.$userInfo.session_key,encryptedData:t.detail.encryptedData,iv:t.detail.iv}}).then(function(t){200==t.statusCode&&0==t.data.code?e.userTel=t.data.data.phoneNumber:e.api.warnNotice(t.data.message)}).catch(function(){e.api.warnNotice("操作失败")})},toAddTvl:function(){this.tvlArr.push({name:"name",id_card:"id_card",tel:"tel",ageType:2,addFee:0});var t=this.$api.pointProblem(this.actInfo.pay_fee,this.actInfo.service_fee,"add");this.actInfo.relFee=this.$api.pointProblem(t,this.tvlArr.length,"mul")},toDeleteTvl:function(t){this.tvlArr.splice(t,1);var e=this.$api.pointProblem(this.actInfo.pay_fee,this.actInfo.service_fee,"add");this.actInfo.relFee=this.$api.pointProblem(e,this.tvlArr.length,"mul"),this.othFeeCount()},formSubmit:function(e){var i=this;if(this.isOverAge)return this.$api.warnNotice("您有出行人超过70周岁，请线下联系平台报名"),!1;for(var n=e.detail.value,o=Object.keys(n),a=[],r=0;r<o.length;r++){var c=o[r].split("#")[1],s=o[r].split("#")[0];a[c]?a[c][s]=n[o[r]]:(a[c]={},a[c][s]=n[o[r]])}var u=!0;a.map(function(t,e){return""==i.$api.trim(t.name)?(u=!1,i.$api.warnNotice("您还有姓名未填写"),!1):i.$api.inputTest(t.id_card,"card")&&i.$api.inputTest(t.tel,"tel")?void(u=!0):(u=!1,!1)}),u&&(this.isAgreeContract?this.isAgreeAttention?(1==this.fromType&&t.showLoading({title:"调用支付中...",mask:!0}),this.submitApi(a)):this.$api.warnNotice("请查看并同意特别注意事项！"):this.$api.warnNotice("请阅读并同意团队出境合同书！"))},submitApi:function(e){var i=this,n=this;this.$api.ajax({url:1==this.fromType?this.$config.applyOrder:this.$config.cfActApply,method:"POST",data:{no:this.$config.no,dear_id:this.dear_id,is_doctor:this.is_doctor?1:0,equ_room:this.equ_room?1:0,attach_fee:this.subjoinFee,apply_list:e}}).then(function(e){200==e.statusCode&&0==e.data.code?1==n.fromType?(t.hideLoading(),t.requestPayment({timeStamp:e.data.data.timeStamp||e.data.data.timestamp,nonceStr:e.data.data.nonceStr,package:e.data.data.package,signType:e.data.data.signType,paySign:e.data.data.paySign,success:function(i){"requestPayment:ok"==i.errMsg&&t.showToast({title:"支付成功",icon:"success",success:function(){setTimeout(function(){n.toJumpOrderList(!0),t.navigateTo({url:"/pages/orderDetail/orderDetail?id=".concat(e.data.data.order_id)})},1500)}})},fail:function(t){i.$api.warnNotice("支付失败")}})):t.showToast({title:"提交成功",icon:"success",success:function(){setTimeout(function(){n.toJumpOrderList(!0),t.navigateTo({url:"/pages/cfDetail/cfDetail?id=".concat(e.data.data)})},1500)}}):(t.hideLoading(),i.$api.warnNotice(e.data.message))}).catch(function(){t.hideLoading(),i.$api.warnNotice("提交失败")})}})};e.default=r}).call(this,i("543d")["default"])},d2f9:function(t,e,i){"use strict";(function(t){i("c5ea"),i("921b");n(i("66fd"));var e=n(i("2617"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},eaeb:function(t,e,i){},eff9:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})}},[["d2f9","common/runtime","common/vendor"]]]);